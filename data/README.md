## `data`

Generating RSA-compatible data for posthoc reweighting requires a "hacked" version Pythia. A detailed description is given below:

1. Download a fresh Pythia tarball from [https://pythia.org/releases/](https://pythia.org/releases/) or clone a Pythia release from gitlab [https://gitlab.com/Pythia8/releases](https://gitlab.com/Pythia8/releases). This work was developed using `pythia8312`, and unfortunately, because of the nature of the patch, we can only guarantee compatibility with this version. Forward and backward compatibility can, of course, be achieved with varying levels of manual intervention.

2. Following the `pythia8312/README`, type
   ```
   ./configure
   ```
3. Before compiling with `make`, we need to patch the Pythia source code, specifically `pythia8312/src/FragmentationFlavZPT.cc` using `FragmentationFlavZpT_posthoc.patch`. This can be done by issuing the following command
   ```
   patch <path-to-FragmentationFlavZPT.cc> < <path-to-FragmentationFlavZpT_posthoc.patch>
   ```
4. Continue Pythia compilation
   ```
   make
   ```

Once successfully compiled, new event datasets can now be generated by copying `pgun_qqbar_RSA_data.cc` into the Pythia examples directory `pythia8312/examples` and pasting 
```
# RSA particle gun.
pgun_qqbar_RSA_data: $(PYTHIA) pgun_qqbar_RSA_data.cc
	$(CXX) $@.cc -o $@ $(CXX_COMMON)
```
into the examples Makefile `pythia8312/examples/Makefile`. After recompiling, `pgun_qqbar_RSA_data.cc` can be executed with `./pgun_qqbar_RSA_data`. 

Example output, in the form of `<>.txt` files, can be seen in `./raw_data`. To generate full datasets that can be used in PyTorch and RSA training, the raw data must be further processed into zero-padded numpy arrays. This is facilitated by `RSA_data_converter.py`, details of which, can be found as documentation within the file.